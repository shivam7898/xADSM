# Descriptive Statistics (BE02) {#BE02}

```{r '302A', include=FALSE, cache=FALSE}
sys.source(paste0(.z$RX, "A99Knitr", ".R"), envir = knitr::knit_global())
sys.source(paste0(.z$RX, "000Packages", ".R"), envir = knitr::knit_global())
sys.source(paste0(.z$RX, "A00AllUDF", ".R"), envir = knitr::knit_global())
invisible(lapply(f_getPathR(A05ThemeGG), knitr::read_chunk))
```

## Overview

- This chapter covers ...

## Summarizing Data for a Categorical Variable

```{definition 'Frequency-Distribution'}
A \textcolor{pink}{frequency distribution} is a tabular summary of data showing the number (frequency) of observations in each of several non-overlapping categories or classes.
```

The \textcolor{pink}{relative frequency} of a class equals the fraction or proportion of observations belonging to a class i.e. it is out of 1 whereas 'percent frequency' is out of 100%.

```{r '302CI-Drinks'}
# #Frequency Distribution
aa <- tibble(softdrink = c("Coca-Cola", "Diet Coke", "Dr. Pepper", "Pepsi", "Sprite"), 
             Frequency = c(19, 8, 5, 13, 5))
#
# #Sort, Cummulative Sum, Percentage, and Cummulative Percentage
bb <- aa %>% 
  arrange(desc(Frequency)) %>% 
  mutate(cSUM = cumsum(Frequency)) %>%
  mutate(PROP = 100 * Frequency / sum(Frequency)) %>% 
  mutate(PCT = paste0(PROP, "%")) %>% 
  mutate(cPCT = paste0(100 * cumsum(Frequency) / sum(Frequency), "%"))
```

```{r '302DI-Drinks', echo=FALSE}
kbl(bb,
  caption = 'Frequency Distribution',
  escape = FALSE, align = "c", booktabs = TRUE
  ) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"),
                html_font = "Consolas",	font_size = 12,
                full_width = FALSE,
                fixed_thead = TRUE
  ) %>%
# #Header Row Dark & Bold: RGB (48, 48, 48) =HEX (#303030)
	row_spec(0, color = "white", background = "#303030", bold = TRUE,
	         extra_css = "border-bottom: 1px solid; border-top: 1px solid"
	)
```

Charts - 

- Bar Chart
  - Pareto Chart - 
  - Stacked Bar Chart - Never use it if there are more than 2 categories
- Pie Chart
  - Only use it if total is 100% and Categories are fewer than 5 or 6.
    - Data should be clockwise sorted



## Charts {.tabset .tabset-fade}

### Bar & Pie  {.unlisted .unnumbered}

```{r '302IA-Bar', include=FALSE}
# #Sorted Bar Chart of Frequencies (Needs sorted data & x-axis as Factor)
g302_01 <- bb %>% mutate(across(softdrink, factor, levels = rev(unique(softdrink)))) %>% {
  ggplot(data = ., aes(x = softdrink, y = Frequency)) +
  geom_bar(stat = 'identity', aes(fill = softdrink)) + 
  scale_y_continuous(sec.axis = sec_axis(~ (. / sum(bb$Frequency))*100, name = "Percentages", 
                       labels = function(b) { paste0(round(b, 0), "%")})) +
  geom_text(aes(label = paste0(Frequency, "\n(", PCT, ")")), vjust = 2, 
            colour = c(rep("black", 2), rep("white", nrow(bb)-2))) +
  k_gglayer_bar +	
  labs(x = "Soft Drinks", y = "Frequency", title = "Bar Chart of Categorical Data")
}
```

```{r '302IB-Save', include=FALSE}
ggsave(paste0(.z$PX, "g302_drinks_01_Bar", ".png"), plot = g302_01)
```

```{r '302G-Drinks01-Bar', echo=FALSE, fig.cap="geom_bar(): Frequency Bar Chart", include=FALSE}
knitr::include_graphics(paste0(.z$PX, "g302_drinks_01_Bar", ".png"))
```

```{r '302IC-Pie', include=FALSE}
# #Pie Chart of Frequencies (Note the use of PROP)
g302_02 <- bb %>% mutate(across(softdrink, factor, levels = unique(softdrink))) %>% {
  ggplot(data = ., aes(x = '', y = Frequency, fill = rev(softdrink))) +
  geom_bar(stat = 'identity', width = 1, color = "white") +
  coord_polar(theta = "y", start = 0) +
  geom_text(aes(label = paste0(softdrink, "\n", Frequency, " (", PCT, ")")), 
            position = position_stack(vjust = 0.5), 
            colour = c(rep("black", 2), rep("white", nrow(bb)-2))) +
  k_gglayer_pie +	
  labs(title = "Pie Chart of Categorical Data")
}
```

```{r '302ID-Save', include=FALSE}
ggsave(paste0(.z$PX, "g302_drinks_02_Pie", ".png"), plot = g302_02)
```

```{r '302G-Drinks02-Pie', echo=FALSE, fig.cap="Polar geom_bar(): Frequency Pie Chart", include=FALSE}
knitr::include_graphics(paste0(.z$PX, "g302_drinks_02_Pie", ".png"))
```

```{r '302G-Drinks03', echo=FALSE, ref.label=c('302G-Drinks01-Bar', '302G-Drinks02-Pie'), fig.cap="Bar Chart and Pie Chart of Frequency"}
# #
```

### Bar {.unlisted .unnumbered}

```{r '302IA-Bar-A', ref.label=c('302IA-Bar'), eval=FALSE}
# #
```

### Pie {.unlisted .unnumbered}

```{r '302IC-Pie-A', ref.label=c('302IC-Pie'), eval=FALSE}
# #
```

### f_theme_gg() {.unlisted .unnumbered}
```{r '302F-f_theme_gg', ref.label=c('A05-ThemeGG'), eval=FALSE}
# #
```

```{r '302F-A05-SetThemeNLists', ref.label=c('A05-SetThemeNLists'), eval=FALSE}
# #
```

### Errors {.unlisted .unnumbered}
```{conjecture 'gg-stat-count-geom-bar'}
\textcolor{brown}{Error: stat_count() can only have an x or y aesthetic.}
```

Solution: Use `geom_bar(stat = "identity")`

## Validation {.unnumbered}

```{r '302-Cleanup', include=FALSE, cache=FALSE}
f_rmExist(aa, bb, g302_01)
#f_rmExist(xxComputers, xxCordless)
```

```{r '302-Validation', include=TRUE, cache=FALSE}
# #Summarised Packages and Objects
f_()
#
difftime(Sys.time(), k_start)
```

****

# Data Preprocessing (B17, Oct-31) {#b17}

```{r 'B17', include=FALSE, cache=FALSE}
sys.source(paste0(.z$RX, "A99Knitr", ".R"), envir = knitr::knit_global())
sys.source(paste0(.z$RX, "000Packages", ".R"), envir = knitr::knit_global())
sys.source(paste0(.z$RX, "A00AllUDF", ".R"), envir = knitr::knit_global())
#invisible(lapply(f_getPathR(A09isPrime), knitr::read_chunk))
```

## Data

\textcolor{pink}{Please import the "B16-Cars2.csv".}

```{r 'B17-ImportData', include=FALSE}
xxCars <- f_getRDS(xxCars)
bb <- aa <- xxCars
```

## Z-score Standardisation

```{r 'B17D01', comment="", echo=FALSE, results='asis'}
f_getDef("z-Scores") #dddd
```

- \@ref(eq:z-scores) $z_i = \frac{{x}_i - {\overline{x}}}{{s}}$
  - $z_i \notin \pm 3 \to \text{Outlier}$ 
  - After Standardisation, we can compare values of different orders because these would be scaled into a dimensionless quantity
  - While comparing the Eucledean distance between Two Variables like Age and Income, the standardisation allow these to be scaled to a similar range
    - Ex: If Age range is 20-30 but Income range is 10k-30k, directly using these values will ignore any impact of change in Age.
  - Note that Mean itself includes the impact of extreme values thus it is not very robust. IQR is better because it is based on position

- \textcolor{pink}{scale()}
  - It converts any vector to standard normal


```{r 'B-Scale'}
# #scale(x, center = TRUE, scale = TRUE) output is Nx1 Matrix
bb <- aa %>% select(weightlbs) 
ii <- bb %>% mutate(z = as.vector(scale(weightlbs)))
#bb %>% mutate(z = across(weightlbs, scale)) #matrix
#bb %>% mutate(z = across(weightlbs, ~ as.vector(scale(.)))) #tibble
jj <- bb %>% mutate(across(weightlbs, list(z = ~ as.vector(scale(.))), .names = "{.fn}"))
stopifnot(all(identical(ii, jj)))
```


## Validation {.unlisted .unnumbered .tabset .tabset-fade}

```{r 'B17-Cleanup', include=FALSE, cache=FALSE}
f_rmExist(aa, bb, ee, hh, ii, jj, kk, ll, mm, nn, oo, rr, vv, xx, yy, zz)
```

```{r 'B17-Validation', include=FALSE, cache=FALSE}
# #SUMMARISED Packages and Objects (BOOK CHECK)
f_()
#
difftime(Sys.time(), k_start)
```

****

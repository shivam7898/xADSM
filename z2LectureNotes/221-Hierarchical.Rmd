# Hierarchical Clustering (B21, Nov-28) {#b21}

```{r 'B21', include=FALSE, cache=FALSE}
sys.source(paste0(.z$RX, "A99Knitr", ".R"), envir = knitr::knit_global())
sys.source(paste0(.z$RX, "000Packages", ".R"), envir = knitr::knit_global())
sys.source(paste0(.z$RX, "A00AllUDF", ".R"), envir = knitr::knit_global())
#invisible(lapply(f_getPathR(A09isPrime), knitr::read_chunk))
```

## Overview

- "Hierarchical Clustering"
  - "ForLater"

## Data Movie

\textcolor{pink}{Please import the "B20-movie.csv".}

```{r 'B21-GetMovies', include=FALSE}
#wwww
aa <- xxB20Movies <- f_getRDS(xxB20Movies)
bb <- aa %>% 
  select(-1) %>% 
  mutate(across(everything(), ~ as.vector(scale(.))))
#
```

## Elbow Plot of Silhouette

- Silhouette
  - Range [-1, 1]
  - A good solution has Silhouette value approaching 1
  - Paused at 15:40 to Cover the Book Chapter 22

```{r 'B21-ElbowSil'}
hh <- bb
cap_hh <- "B21P01"
ttl_hh <- "Movie: Elbow Curve (Silhouette)"
#
# #method = "silhouette" (for average silhouette width)
B21P01 <- fviz_nbclust(hh, FUNcluster = kmeans, method = "silhouette") +
  labs(caption = cap_hh, title = ttl_hh)
```

```{r 'B21P01-Save', include=FALSE}
loc_png <- paste0(.z$PX, cap_hh, "-Movie-Elbow-Sil", ".png")
if(!file.exists(loc_png)) {
  ggsave(loc_png, plot = B21P01, device = "png", dpi = 144) 
}
```

```{r 'B21P01', echo=FALSE, fig.cap="Movie: Elbow Curve of k (Silhouette)"}
knitr::include_graphics(paste0(.z$PX, "B21P01", "-Movie-Elbow-Sil", ".png"))
```



## Validation {.unlisted .unnumbered .tabset .tabset-fade}

```{r 'B21-Cleanup', include=FALSE, cache=FALSE}
f_rmExist(aa, bb, ii, jj, kk, ll)
```

```{r 'B21-Validation', include=TRUE, cache=FALSE}
# #SUMMARISED Packages and Objects (BOOK CHECK)
f_()
#
difftime(Sys.time(), k_start)
```

****
